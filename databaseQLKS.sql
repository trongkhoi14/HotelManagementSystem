ALTER SESSION SET "_ORACLE_SCRIPT"=TRUE;
-- Tao 1 user cho admin
DECLARE
  user_exists NUMBER;
BEGIN
  SELECT COUNT(*) INTO user_exists FROM DBA_USERS WHERE USERNAME = 'HOTELADMIN';

  IF user_exists > 0 THEN
    EXECUTE IMMEDIATE 'DROP USER HOTELADMIN CASCADE';
  END IF;
END;
/
-- Tao tai khoang admin
CREATE USER HOTELADMIN IDENTIFIED BY 123;

-- Cap quyen can thiet cho admin
GRANT DBA TO HOTELADMIN;
GRANT ALL PRIVILEGES TO HOTELADMIN WITH ADMIN OPTION;
GRANT EXECUTE ANY PROCEDURE TO HOTELADMIN;
GRANT ALTER SESSION TO HOTELADMIN;

-- Ket noi bang connection myadmin
CONNECT HOTELADMIN/123;
-- Tao database
---- Xoa cac bang neu da ton tai
BEGIN
  FOR table_name IN (
    SELECT table_name FROM user_tables WHERE table_name 
    IN ('NHANVIEN', 'KHACHHANG', 'PHONG', 'LOAIPHONG', 'PDGTINHTRANGPHONG', 
        'PHIEUDATPHONG', 'CT_PHIEUDATPHONG', 'PHIEUNHANPHONG', 'CT_PHIEUNHANPHONG',
        'DICHVU', 'PHIEUDICHVU', 'CT_PHIEUDICHVU', 'HOADON', 'DOITAC',
        'TOURDULICH', 'PDKTOUR', 'CT_PDKTOUR')
  ) LOOP
    -- Xoa cac rang buoc khoa ngoai sau khi xoa bang
    FOR c IN (
      SELECT constraint_name, table_name, owner
      FROM all_constraints
      WHERE constraint_type = 'R'
      AND r_constraint_name IN (
        SELECT constraint_name
        FROM all_constraints
        WHERE constraint_type in ('P', 'U')
        AND table_name = table_name.table_name
        AND owner = USER
      )
    ) LOOP
      EXECUTE IMMEDIATE 'ALTER TABLE ' || c.owner || '.' || c.table_name ||
                        ' DROP CONSTRAINT ' || c.constraint_name;
    END LOOP;
    
    -- Xoa bang sau khi da xoa cac rang buoc khoa ngoai
    BEGIN
      EXECUTE IMMEDIATE 'DROP TABLE ' || table_name.table_name;
    EXCEPTION
      WHEN OTHERS THEN
        IF SQLCODE != -942 THEN
          RAISE;
        END IF;
    END;
  END LOOP;
END;
/

CREATE TABLE NHANVIEN (
    MANV VARCHAR2(10),
    TENNV NVARCHAR2(50),
    PHAI VARCHAR2(10),
    NGAYSINH DATE,
    DIACHI NVARCHAR2(100),
    SODT VARCHAR2(12),
    EMAIL VARCHAR2(50),
    LUONG NUMBER(18,2),
    VAITRO VARCHAR2(30),
    CONSTRAINT PK_NHANVIEN PRIMARY KEY (MANV)
);
/

CREATE TABLE KHACHHANG (
    MAKH VARCHAR2(10),
    TENKH NVARCHAR2(50),
    NGAYSINH DATE,
    DIACHI NVARCHAR2(100),
    EMAIL VARCHAR2(50),
    SODT VARCHAR2(12),
    SOFAX VARCHAR2(12),
    TINHTRANG NVARCHAR2(20),
    CONSTRAINT PK_KHACHHANG PRIMARY KEY (MAKH)
);
/

CREATE TABLE PHONG (
    MAPHONG VARCHAR2(10),
    LOAIPHONG VARCHAR2(10),
    TRANGTHAI NVARCHAR2(20),
    CONSTRAINT PK_PHONG PRIMARY KEY (MAPHONG)
);
/

CREATE TABLE LOAIPHONG (
    MALP VARCHAR2(10),
    HANGPHONG NVARCHAR2(20),
    LOAIGIUONG NVARCHAR2(20),
    SUCCHUA INT,
    MOTA NVARCHAR2(100),
    GIAMOTDEM NUMBER(18,2),
    CONSTRAINT PK_LOAIPHONG PRIMARY KEY (MALP)
);
/

CREATE TABLE PDGTINHTRANGPHONG (
    MAPDG VARCHAR2(10),
    MAPDP VARCHAR2(10),
    MAPHONG VARCHAR2(10),
    NGAYLAP DATE,
    MOTA NVARCHAR2(100),
    MANV VARCHAR2(10),
    CONSTRAINT PK_PDGTINHTRANGPHONG PRIMARY KEY (MAPDG)
);
/

CREATE TABLE PHIEUDATPHONG (
    MAPDP VARCHAR2(10),
    TINHTRANG NVARCHAR2(30),
    NGAYLAP DATE,
    NGAYDEN DATE,
    SODEMLUUTRU INT,
    SONGUOI INT,
    MANV VARCHAR2(10),
    MAKH VARCHAR2(10),
    CONSTRAINT PK_PHIEUDATPHONG PRIMARY KEY (MAPDP)
);
/

CREATE TABLE CT_PHIEUDATPHONG (
    MAPDP VARCHAR2(10),
    MAPHONG VARCHAR2(10),
    CONSTRAINT PK_CT_PHIEUDATPHONG PRIMARY KEY (MAPDP, MAPHONG)
);
/

CREATE TABLE PHIEUNHANPHONG (
    MAPNP VARCHAR2(10),
    NGAYLAP DATE,
    MAPDP VARCHAR2(10),
    MANV VARCHAR2(10),
    CONSTRAINT PK_PHIEUNHANPHONG PRIMARY KEY (MAPNP)
);
/

CREATE TABLE CT_PHIEUNHANPHONG (
    MAPNP VARCHAR2(10),
    MAKH VARCHAR2(10),
    CONSTRAINT PK_CT_PHIEUNHANPHONG PRIMARY KEY (MAPNP, MAKH)
);
/

CREATE TABLE DICHVU (
    MADV VARCHAR2(10),
    TENDV NVARCHAR2(50),
    DONVITINH NVARCHAR2(20),
    GIADV NUMBER(18,2),
    LOAIDV NVARCHAR2(30),
    CONSTRAINT PK_DICHVU PRIMARY KEY (MADV)
);
/

CREATE TABLE PHIEUDICHVU (
    MAPDV VARCHAR2(10),
    NGAYCAPNHAT DATE,
    MANV VARCHAR2(10),
    MAPDP VARCHAR2(10),
    CONSTRAINT PK_PHIEUDICHVU PRIMARY KEY (MAPDV)
);
/

CREATE TABLE CT_PHIEUDICHVU (
    MAPDV VARCHAR2(10),
    MADV VARCHAR2(10),
    SOLUONG INT,
    LICHSUDUNG DATE,
    GHICHU NVARCHAR2(100),
    NHANXET NVARCHAR2(100),
    CONSTRAINT PK_CT_PHIEUDICHVU PRIMARY KEY (MAPDV, MADV)
);
/

CREATE TABLE HOADON (
    MAHD VARCHAR2(10),
    MAPDP VARCHAR2(10),
    NGAYCAPNHAT DATE,
    TRANGTHAI NVARCHAR2(20),
    TIENCOC NUMBER(18,2),
    PHUTHU NUMBER(18,2),
    TIENNHAN NUMBER(18,2),
    TIENHOAN NUMBER(18,2),
    PHUONGTHUCTT NVARCHAR2(20),
    CONSTRAINT PK_HOADON PRIMARY KEY (MAHD)
);
/

CREATE TABLE DOITAC (
    MADT VARCHAR2(10),
    TENDT VARCHAR2(10),
    EMAIL VARCHAR2(30),
    DIACHI NVARCHAR2(50),
    SODT VARCHAR2(12),
    CONSTRAINT PK_DOITAC PRIMARY KEY (MADT)
);
/

CREATE TABLE TOURDULICH (
    MATDL VARCHAR2(10),
    TEN NVARCHAR2(50),
    DIADIEM NVARCHAR2(50),
    MOTA NVARCHAR2(100),
    GIA NUMBER(18,2),
    MADT VARCHAR2(10),
    CONSTRAINT PK_TOURDULICH PRIMARY KEY (MATDL)
);
/

CREATE TABLE PDKTOUR (
    MAPDKT VARCHAR2(10),
    TGKHOIHANH DATE,
    SONGUOITG INT,
    DICHVUDUADON NVARCHAR2(10),
    MATDL VARCHAR2(10),
    YCDB NVARCHAR2(50),
    CONSTRAINT PK_PDKTOUR PRIMARY KEY (MAPDKT)
);
/

CREATE TABLE CT_PDKTOUR (
    MAPDK VARCHAR2(10),
    MAKH VARCHAR2(10),
    CONSTRAINT PK_CT_PDKTOUR PRIMARY KEY (MAPDK, MAKH)
);
/
-- Nhap du lieu mau
BEGIN
INSERT INTO NHANVIEN (MANV, TENNV, PHAI, NGAYSINH, DIACHI, SODT, EMAIL, LUONG, VAITRO)
VALUES ('NV001', 'Nguyen Van A', 'Nam', TO_DATE('01-01-1990', 'DD-MM-YYYY'), 'Ho Chi Minh', '0987654321', 'nvana@example.com', 1000, 'Le tan');
INSERT INTO NHANVIEN (MANV, TENNV, PHAI, NGAYSINH, DIACHI, SODT, EMAIL, LUONG, VAITRO)
VALUES ('NV002', 'Tran Thi B', 'Nu', TO_DATE('05-05-1995', 'DD-MM-YYYY'), 'Ho Chi Minh', '0123456789', 'ttb@example.com', 1500, 'Le tan');
INSERT INTO NHANVIEN (MANV, TENNV, PHAI, NGAYSINH, DIACHI, SODT, EMAIL, LUONG, VAITRO)
VALUES ('NV003', 'Le Thi C', 'Nu', TO_DATE('10-10-1992', 'DD-MM-YYYY'), 'Ho Chi Minh', '0912345678', 'ltc@example.com', 1200, 'Le tan');
INSERT INTO NHANVIEN (MANV, TENNV, PHAI, NGAYSINH, DIACHI, SODT, EMAIL, LUONG, VAITRO)
VALUES ('NV004', 'Nguyen Thi D', 'Nu', TO_DATE('10-10-1992', 'DD-MM-YYYY'), 'Ho Chi Minh', '0912345648', 'ntd@example.com', 1200, 'Buong phong');
INSERT INTO NHANVIEN (MANV, TENNV, PHAI, NGAYSINH, DIACHI, SODT, EMAIL, LUONG, VAITRO)
VALUES ('NV005', 'Nguyen Ke Toan', 'Nu', TO_DATE('10-10-1992', 'DD-MM-YYYY'), 'Ho Chi Minh', '0912345678', 'nkt@example.com', 1200, 'Ke toan');

INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH001', 'Nguyen Van A', TO_DATE('01-01-1990', 'DD-MM-YYYY'), 'Ha Noi', 'nvana@example.com', '0987654321', '0123456789', 'Active');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH002', 'Tran Thi B', TO_DATE('05-05-1995', 'DD-MM-YYYY'), 'Ho Chi Minh', 'ttb@example.com', '0123456789', '0123456789', 'Active');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH003', 'Le Van C', TO_DATE('10-10-1992', 'DD-MM-YYYY'), 'Da Nang', 'lvc@example.com', '0912345678', '0912345678', 'Inactive');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH004', 'Pham Thi D', TO_DATE('15-02-1993', 'DD-MM-YYYY'), 'Hai Phong', 'ptd@example.com', '0987654321', '0123456789', 'Active');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH005', 'Hoang Thi E', TO_DATE('20-06-1991', 'DD-MM-YYYY'), 'Can Tho', 'hte@example.com', '0123456789', '0123456789', 'Active');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH006', 'Vu Thi F', TO_DATE('08-11-1994', 'DD-MM-YYYY'), 'Nha Trang', 'vtf@example.com', '0912345678', '0912345678', 'Inactive');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH007', 'Nguyen Thi G', TO_DATE('01-03-1992', 'DD-MM-YYYY'), 'Vung Tau', 'ntg@example.com', '0987654321', '0123456789', 'Active');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH008', 'Tran Thi H', TO_DATE('05-07-1990', 'DD-MM-YYYY'), 'Phu Quoc', 'tth@example.com', '0123456789', '0123456789', 'Active');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH009', 'Le Thi I', TO_DATE('10-12-1993', 'DD-MM-YYYY'), 'Da Lat', 'lti@example.com', '0912345678', '0912345678', 'Inactive');
INSERT INTO KHACHHANG (MAKH, TENKH, NGAYSINH, DIACHI, EMAIL, SODT, SOFAX, TINHTRANG)
VALUES ('KH010', 'Do Thi K', TO_DATE('22-09-1989', 'DD-MM-YYYY'), 'Ha Giang', 'dtk@example.com', '0987654321', '0123456789', 'Active');

INSERT INTO LOAIPHONG (MALP, HANGPHONG, LOAIGIUONG, SUCCHUA, MOTA, GIAMOTDEM)
VALUES ('LP001', 'Luxury', 'Giuong Don', 2, 'Phong sang trong hang Luxury, giuong don', 200.00);
INSERT INTO LOAIPHONG (MALP, HANGPHONG, LOAIGIUONG, SUCCHUA, MOTA, GIAMOTDEM)
VALUES ('LP002', 'Luxury', 'Giuong Doi', 2, 'Phong sang trong hang Luxury, giuong doi', 250.00);
INSERT INTO LOAIPHONG (MALP, HANGPHONG, LOAIGIUONG, SUCCHUA, MOTA, GIAMOTDEM)
VALUES ('LP003', 'Super Luxury', 'Giuong Don', 2, 'Phong cuc sang trong hang Super Luxury, giuong don', 300.00);
INSERT INTO LOAIPHONG (MALP, HANGPHONG, LOAIGIUONG, SUCCHUA, MOTA, GIAMOTDEM)
VALUES ('LP004', 'Super Luxury', 'Giuong Doi', 2, 'Phong cuc sang trong hang Super Luxury, giuong doi', 350.00);
INSERT INTO LOAIPHONG (MALP, HANGPHONG, LOAIGIUONG, SUCCHUA, MOTA, GIAMOTDEM)
VALUES ('LP005', 'Ultra Luxury', 'Giuong Don', 2, 'Phong sieu sang trong hang Ultra Luxury, giuong don', 400.00);
INSERT INTO LOAIPHONG (MALP, HANGPHONG, LOAIGIUONG, SUCCHUA, MOTA, GIAMOTDEM)
VALUES ('LP006', 'Ultra Luxury', 'Giuong Doi', 2, 'Phong sieu sang trong hang Ultra Luxury, giuong doi', 450.00);

INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P001', 'LP001', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P002', 'LP002', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P003', 'LP003', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P004', 'LP001', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P005', 'LP002', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P006', 'LP003', 'Dang sua chua');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P007', 'LP004', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P008', 'LP004', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P009', 'LP005', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P010', 'LP005', 'Dang sua chua');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P011', 'LP006', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P012', 'LP006', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P013', 'LP003', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P014', 'LP002', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P015', 'LP001', 'Dang sua chua');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P016', 'LP004', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P017', 'LP003', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P018', 'LP002', 'Dang sua chua');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P019', 'LP001', 'O duoc');
INSERT INTO PHONG (MAPHONG, LOAIPHONG, TRANGTHAI)
VALUES ('P020', 'LP005', 'O duoc');

INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP001', N'Da coc', TO_DATE('2023-01-10', 'YYYY-MM-DD'), TO_DATE('2023-01-15', 'YYYY-MM-DD'), 2, 2, 'NV001', 'KH001');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP002', N'Chua coc', TO_DATE('2023-02-05', 'YYYY-MM-DD'), TO_DATE('2023-02-10', 'YYYY-MM-DD'), 1, 1, 'NV002', 'KH002');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP003', N'Da coc', TO_DATE('2023-03-20', 'YYYY-MM-DD'), TO_DATE('2023-03-25', 'YYYY-MM-DD'), 1, 1, 'NV003', 'KH003');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP004', N'Chua coc', TO_DATE('2023-04-01', 'YYYY-MM-DD'), TO_DATE('2023-04-05', 'YYYY-MM-DD'), 2, 2, 'NV004', 'KH004');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP005', N'Da coc', TO_DATE('2023-05-15', 'YYYY-MM-DD'), TO_DATE('2023-05-20', 'YYYY-MM-DD'), 1, 1, 'NV001', 'KH005');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP006', N'Chua coc', TO_DATE('2023-06-10', 'YYYY-MM-DD'), TO_DATE('2023-06-15', 'YYYY-MM-DD'), 1, 1, 'NV001', 'KH006');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP007', N'Da coc', TO_DATE('2023-07-20', 'YYYY-MM-DD'), TO_DATE('2023-07-25', 'YYYY-MM-DD'), 2, 2, 'NV001', 'KH007');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP008', N'Chua coc', TO_DATE('2023-08-05', 'YYYY-MM-DD'), TO_DATE('2023-08-10', 'YYYY-MM-DD'), 1, 1, 'NV001', 'KH008');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP009', N'Da coc', TO_DATE('2023-09-20', 'YYYY-MM-DD'), TO_DATE('2023-09-25', 'YYYY-MM-DD'), 1, 1, 'NV001', 'KH009');
INSERT INTO PHIEUDATPHONG (MAPDP, TINHTRANG, NGAYLAP, NGAYDEN, SODEMLUUTRU, SONGUOI, MANV, MAKH)
VALUES ('PDP010', N'Chua coc', TO_DATE('2023-10-10', 'YYYY-MM-DD'), TO_DATE('2023-10-15', 'YYYY-MM-DD'), 2, 2, 'NV001', 'KH010');

INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP001', 'P001');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP001', 'P002');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP002', 'P003');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP003', 'P001');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP003', 'P002');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP003', 'P003');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP004', 'P004');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP005', 'P005');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP006', 'P006');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP007', 'P007');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP008', 'P008');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP009', 'P010');
INSERT INTO CT_PHIEUDATPHONG (MAPDP, MAPHONG)
VALUES ('PDP010', 'P011');

INSERT INTO PHIEUNHANPHONG (MAPNP, NGAYLAP, MAPDP, MANV)
VALUES ('PNP001', TO_DATE('2023-01-15', 'YYYY-MM-DD'), 'PDP001', 'NV001');
INSERT INTO PHIEUNHANPHONG (MAPNP, NGAYLAP, MAPDP, MANV)
VALUES ('PNP002', TO_DATE('2023-02-10', 'YYYY-MM-DD'), 'PDP002', 'NV002');
INSERT INTO PHIEUNHANPHONG (MAPNP, NGAYLAP, MAPDP, MANV)
VALUES ('PNP003', TO_DATE('2023-03-25', 'YYYY-MM-DD'), 'PDP003', 'NV003');
INSERT INTO PHIEUNHANPHONG (MAPNP, NGAYLAP, MAPDP, MANV)
VALUES ('PNP004', TO_DATE('2023-04-05', 'YYYY-MM-DD'), 'PDP004', 'NV001');
INSERT INTO PHIEUNHANPHONG (MAPNP, NGAYLAP, MAPDP, MANV)
VALUES ('PNP005', TO_DATE('2023-05-20', 'YYYY-MM-DD'), 'PDP005', 'NV001');

INSERT INTO CT_PHIEUNHANPHONG (MAPNP, MAKH)
VALUES ('PNP001', 'KH001');
INSERT INTO CT_PHIEUNHANPHONG (MAPNP, MAKH)
VALUES ('PNP001', 'KH002');
INSERT INTO CT_PHIEUNHANPHONG (MAPNP, MAKH)
VALUES ('PNP002', 'KH003');
INSERT INTO CT_PHIEUNHANPHONG (MAPNP, MAKH)
VALUES ('PNP003', 'KH004');
INSERT INTO CT_PHIEUNHANPHONG (MAPNP, MAKH)
VALUES ('PNP004', 'KH005');
INSERT INTO CT_PHIEUNHANPHONG (MAPNP, MAKH)
VALUES ('PNP004', 'KH006');
INSERT INTO CT_PHIEUNHANPHONG (MAPNP, MAKH)
VALUES ('PNP005', 'KH007');

INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV001', 'Dich vu an sang', 'Bua', 50000, 'Dich vu an uong');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV002', 'Dich vu giat ui', 'Kg', 25000, 'Dich vu phuc vu');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV003', 'Dich vu huong dan du lich', 'Gio', 150000, 'Dich vu du lich');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV004', 'Dich vu massage', 'Phut', 200000, 'Dich vu spa');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV005', 'Dich vu hoi trai', 'Buoi', 800000, 'Dich vu giai tri');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV006', 'Dich vu nha hang', 'Buoi', 150000, 'Dich vu an uong');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV007', 'Dich vu thue xe', 'Ngay', 500000, 'Dich vu di lai');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV008', 'Dich vu hoi truong', 'Gio', 1000000, 'Dich vu hoi nghi');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV009', 'Dich vu bao ve', 'Gio', 200000, 'Dich vu an ninh');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV010', 'Dich vu yoga', 'Buoi', 300000, 'Dich vu the duc');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV011', 'Dich vu massage chan', 'Phut', 180000, 'Dich vu spa');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV012', 'Dich vu dua don san bay', 'Chuyen', 350000, 'Dich vu di lai');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV013', 'Dich vu thue xe may', 'Ngay', 200000, 'Dich vu di lai');
INSERT INTO DICHVU (MADV, TENDV, DONVITINH, GIADV, LOAIDV)
VALUES ('DV014', 'Dich vu karaoke', 'Gio', 400000, 'Dich vu giai tri');

INSERT INTO PHIEUDICHVU (MAPDV, NGAYCAPNHAT, MANV, MAPDP)
VALUES ('PDV001', TO_DATE('2023-04-01', 'YYYY-MM-DD'), 'NV001', 'PDP001');
INSERT INTO PHIEUDICHVU (MAPDV, NGAYCAPNHAT, MANV, MAPDP)
VALUES ('PDV002', TO_DATE('2023-04-02', 'YYYY-MM-DD'), 'NV002', 'PDP002');
INSERT INTO PHIEUDICHVU (MAPDV, NGAYCAPNHAT, MANV, MAPDP)
VALUES ('PDV003', TO_DATE('2023-04-03', 'YYYY-MM-DD'), 'NV003', 'PDP003');
INSERT INTO PHIEUDICHVU (MAPDV, NGAYCAPNHAT, MANV, MAPDP)
VALUES ('PDV004', TO_DATE('2023-04-04', 'YYYY-MM-DD'), 'NV004', 'PDP004');
INSERT INTO PHIEUDICHVU (MAPDV, NGAYCAPNHAT, MANV, MAPDP)
VALUES ('PDV005', TO_DATE('2023-04-05', 'YYYY-MM-DD'), 'NV005', 'PDP005');

INSERT INTO CT_PHIEUDICHVU (MAPDV, MADV, SOLUONG, LICHSUDUNG, GHICHU, NHANXET)
VALUES ('PDV001', 'DV001', 2, TO_DATE('2023-04-01', 'YYYY-MM-DD'), 'Ghi chu 1', 'Nhan xet 1');
INSERT INTO CT_PHIEUDICHVU (MAPDV, MADV, SOLUONG, LICHSUDUNG, GHICHU, NHANXET)
VALUES ('PDV002', 'DV002', 1, TO_DATE('2023-04-02', 'YYYY-MM-DD'), 'Ghi chu 2', 'Nhan xet 2');
INSERT INTO CT_PHIEUDICHVU (MAPDV, MADV, SOLUONG, LICHSUDUNG, GHICHU, NHANXET)
VALUES ('PDV003', 'DV003', 3, TO_DATE('2023-04-03', 'YYYY-MM-DD'), 'Ghi chu 3', 'Nhan xet 3');
INSERT INTO CT_PHIEUDICHVU (MAPDV, MADV, SOLUONG, LICHSUDUNG, GHICHU, NHANXET)
VALUES ('PDV004', 'DV004', 2, TO_DATE('2023-04-04', 'YYYY-MM-DD'), 'Ghi chu 4', 'Nhan xet 4');
INSERT INTO CT_PHIEUDICHVU (MAPDV, MADV, SOLUONG, LICHSUDUNG, GHICHU, NHANXET)
VALUES ('PDV005', 'DV005', 1, TO_DATE('2023-04-05', 'YYYY-MM-DD'), 'Ghi chu 5', 'Nhan xet 5');

INSERT INTO HOADON (MAHD, MAPDP, NGAYCAPNHAT, TRANGTHAI, TIENCOC, PHUTHU, TIENNHAN, TIENHOAN, PHUONGTHUCTT)
VALUES ('HD001', 'PDP001', TO_DATE('2023-04-01', 'YYYY-MM-DD'), 'Hoan tat', 10000000 * 0.3, 0, 0, 0, 'Tien mat');
INSERT INTO HOADON (MAHD, MAPDP, NGAYCAPNHAT, TRANGTHAI, TIENCOC, PHUTHU, TIENNHAN, TIENHOAN, PHUONGTHUCTT)
VALUES ('HD002', 'PDP002', TO_DATE('2023-04-02', 'YYYY-MM-DD'), 'Chua thanh toan', 15000000 * 0.3, 500000, 0, 0, 'The tin dung');
INSERT INTO HOADON (MAHD, MAPDP, NGAYCAPNHAT, TRANGTHAI, TIENCOC, PHUTHU, TIENNHAN, TIENHOAN, PHUONGTHUCTT)
VALUES ('HD003', 'PDP003', TO_DATE('2023-04-03', 'YYYY-MM-DD'), 'Hoan tat', 8000000 * 0.3, 0, 0, 0, 'Chuyen khoan');
INSERT INTO HOADON (MAHD, MAPDP, NGAYCAPNHAT, TRANGTHAI, TIENCOC, PHUTHU, TIENNHAN, TIENHOAN, PHUONGTHUCTT)
VALUES ('HD004', 'PDP004', TO_DATE('2023-04-03', 'YYYY-MM-DD'), 'Chua thanh toan', 12000000 * 0.3, 0, 0, 0, 'The tin dung');
INSERT INTO HOADON (MAHD, MAPDP, NGAYCAPNHAT, TRANGTHAI, TIENCOC, PHUTHU, TIENNHAN, TIENHOAN, PHUONGTHUCTT)
VALUES ('HD005', 'PDP005', TO_DATE('2023-04-04', 'YYYY-MM-DD'), 'Hoan tat', 9000000 * 0.3, 0, 0, 0, 'Tien mat');
END;
-- Cac rang buoc khoa ngoai
ALTER TABLE PHONG
ADD CONSTRAINT FK_PHONG_LOAIPHONG
FOREIGN KEY(LOAIPHONG) REFERENCES LOAIPHONG(MALP);

ALTER TABLE PDGTINHTRANGPHONG
ADD CONSTRAINT FK_PDGTINHTRANGPHONG_MAPDP
FOREIGN KEY(MAPDP) REFERENCES PHIEUDATPHONG(MAPDP);

ALTER TABLE PDGTINHTRANGPHONG
ADD CONSTRAINT FK_PDGTINHTRANGPHONG_MAPHONG
FOREIGN KEY(MAPHONG) REFERENCES PHONG(MAPHONG);

ALTER TABLE PHIEUDATPHONG
ADD CONSTRAINT FK_PHIEUDATPHONG_MANV
FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV);

ALTER TABLE PHIEUDATPHONG
ADD CONSTRAINT FK_PHIEUDATPHONG_MAKH
FOREIGN KEY(MAKH) REFERENCES KHACHHANG(MAKH);

ALTER TABLE CT_PHIEUDATPHONG
ADD CONSTRAINT FK_CT_PHIEUDATPHONG
FOREIGN KEY(MAPDP) REFERENCES PHIEUDATPHONG(MAPDP);

ALTER TABLE CT_PHIEUDATPHONG
ADD CONSTRAINT FK_CT_PHIEUDATPHONG_MAPHONG
FOREIGN KEY(MAPHONG) REFERENCES PHONG(MAPHONG);

ALTER TABLE PHIEUNHANPHONG
ADD CONSTRAINT FK_PHIEUNHANPHONG_MAPDP
FOREIGN KEY(MAPDP) REFERENCES PHIEUDATPHONG(MAPDP);

ALTER TABLE PHIEUNHANPHONG
ADD CONSTRAINT FK_PHIEUNHANPHONG_MANV
FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV);

ALTER TABLE CT_PHIEUNHANPHONG
ADD CONSTRAINT FK_CT_PHIEUNHANPHONG_MAPNP
FOREIGN KEY(MAPNP) REFERENCES PHIEUNHANPHONG(MAPNP);

ALTER TABLE CT_PHIEUNHANPHONG
ADD CONSTRAINT FK_CT_PHIEUNHANPHONG_MAKH
FOREIGN KEY(MAKH) REFERENCES KHACHHANG(MAKH);

ALTER TABLE PHIEUDICHVU
ADD CONSTRAINT FK_PHIEUDICHVU_MANV
FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV);

ALTER TABLE PHIEUDICHVU
ADD CONSTRAINT FK_PHIEUDICHVU_MAPDP
FOREIGN KEY(MAPDP) REFERENCES PHIEUDATPHONG(MAPDP);

ALTER TABLE CT_PHIEUDICHVU
ADD CONSTRAINT FK_CT_PHIEUDICHVU_MADV
FOREIGN KEY(MADV) REFERENCES DICHVU(MADV);

ALTER TABLE HOADON
ADD CONSTRAINT FK_HOADON_MAPDP
FOREIGN KEY(MAPDP) REFERENCES PHIEUDATPHONG(MAPDP);

ALTER TABLE TOURDULICH
ADD CONSTRAINT FK_TOURDULICH_MADT
FOREIGN KEY(MADT) REFERENCES DOITAC(MADT);

ALTER TABLE PDKTOUR
ADD CONSTRAINT FK_PDKTOUR_MATDL
FOREIGN KEY(MATDL) REFERENCES TOURDULICH(MATDL);

ALTER TABLE CT_PDKTOUR
ADD CONSTRAINT FK_CT_PDKTOUR_MAPDK
FOREIGN KEY(MAPDK) REFERENCES PDKTOUR(MAPDKT);

ALTER TABLE CT_PDKTOUR
ADD CONSTRAINT FK_CT_PDKTOUR_MAKH
FOREIGN KEY(MAKH) REFERENCES KHACHHANG(MAKH);